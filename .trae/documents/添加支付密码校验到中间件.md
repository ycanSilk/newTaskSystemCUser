## 实现思路
1. **客户端校验逻辑**：将支付密码校验逻辑从中间件移到客户端全局布局组件中
2. **条件校验**：只对已登录用户进行校验
3. **API调用**：在客户端组件中调用 `checkWalletPwd` API
4. **提示框实现**：使用客户端组件弹出提示框，包含确认按钮
5. **点击跳转**：用户点击确认按钮后，跳转到设置支付密码页面
6. **例外处理**：登录和注册页面不需要校验

## 修改步骤
1. **修改全局布局**：在 `src/app/layout.tsx` 中添加支付密码校验逻辑
2. **添加提示框组件**：使用现有的提示框组件或创建新的提示框组件
3. **API调用实现**：在布局组件中实现 `checkWalletPwd` API调用
4. **条件显示提示框**：根据API返回结果，决定是否显示提示框
5. **点击跳转逻辑**：用户点击确认按钮后，跳转到设置支付密码页面
6. **移除旧逻辑**：移除之前在登录页面和中间件中添加的校验逻辑
7. **测试验证**：确保所有页面访问时都能正确校验，且用户体验符合要求

## 具体修改
1. **修改 `src/app/layout.tsx`**：
   - 导入必要的依赖（useUserStore、useRouter、API类型定义）
   - 添加支付密码校验状态（isChecking、showPasswordModal）
   - 实现 `checkWalletPassword` 函数
   - 添加 `useEffect` 钩子，在组件挂载时调用校验函数
   - 实现提示框UI和点击事件处理

2. **移除旧逻辑**：
   - 从 `login/page.tsx` 中移除支付密码校验逻辑
   - 从 `hall/page.tsx` 中移除支付密码校验逻辑
   - 不修改 `middleware.ts`（中间件无法操作DOM）

3. **添加条件渲染**：
   - 只对已登录用户显示提示框
   - 登录和注册页面不显示提示框

## 预期效果
- 访问任何页面时，已登录用户都会进行支付密码校验
- 未设置支付密码时，弹出提示框，包含确认按钮
- 点击确认按钮后，跳转到设置支付密码页面
- 登录和注册页面不受影响
- 提供良好的用户体验，不直接强制重定向

## 注意事项
- 严格按照API_REQUEST_STANDARD.md规范执行
- 只修改必要的代码，不做其余修改
- 确保提示框样式美观，交互友好
- 避免重复校验，提高性能